# スケジュール画面レイアウト方針（2026-02-23）

## 背景

スケジュール画面で以下の課題があった。

- 画面下に余白が残り、ガント表示領域が狭い
- 固定 `maxHeight` によりウインドウ高を使い切れない
- 最下部の横スクロールバーが要素に重なって見える

## 採用した方針

「外側余白・セクション間の隙間は維持したまま、ガント領域だけを残り高に追従させる」。

## 実装ルール

対象ファイル: `/Users/nakashioyuu/gantt-chart/components/schedule-dashboard.tsx`

1. ページ全体は `100dvh` を基準にする  
   `main.app-shell` に `height: "100dvh"` を設定し、ウインドウ高さを使い切る。

2. 縦レイアウトは `auto + 1fr` で分配する  
   `viewTab === "schedule"` のとき `gridTemplateRows: "auto minmax(0, 1fr)"` を使い、  
   上段（ヘッダ/フィルタ）を `auto`、下段（ガント）を残り高にする。

3. ガント内スクロールは固定 `vh` を使わない  
   以前の `maxHeight: "68vh"` は使わず、スクロールコンテナを `flex: 1` + `minHeight: 0` にする。

4. 横スクロールバー重なりを回避する  
   スクロールコンテナに `scrollbarGutter: "stable"` を設定し、  
   追加で `paddingBottom` を入れて最下段コンテンツとの視覚的な干渉を避ける。

5. 既存の余白デザインは維持する  
   `app-shell` の外側余白と、セクション間 `gap` は残す（今回の最終設定では `gap: 14`）。

## 変更時の注意

- `overflow` コンテナ配下で `minHeight: 0` がないと、`1fr` が効かず期待どおり縮まないことがある。
- `vh` 固定値を再導入すると、端末やブラウザUI差で再び下余白が出る可能性がある。
- `scrollbarGutter` 非対応環境向けの保険として、`paddingBottom` は残しておく。

## 受け入れ条件

- スケジュールタブで、ガント領域がウインドウ下端まで広がる
- 外側余白・セクション間余白は維持される
- 最下部横スクロールバーがコンテンツに重なって見えにくくなる
